{"uid":"166739babe6401d6","name":"test_storage_re_use","fullName":"tests.integration.ha_tests.test_self_healing#test_storage_re_use","historyId":"c97d99b81d8bb075ab78e01561cd1a68","time":{"start":1728351654013,"stop":1728352265001,"duration":610988},"description":"Verifies that database units with attached storage correctly repurpose storage.\n\n    It is not enough to verify that Juju attaches the storage. Hence test checks that the\n    postgresql properly uses the storage that was provided. (ie. doesn't just re-sync everything\n    from primary, but instead computes a diff between current storage and primary storage.)\n    ","descriptionHtml":"<p>Verifies that database units with attached storage correctly repurpose storage.</p>\n<pre><code>It is not enough to verify that Juju attaches the storage. Hence test checks that the\npostgresql properly uses the storage that was provided. (ie. doesn't just re-sync everything\nfrom primary, but instead computes a diff between current storage and primary storage.)\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"ops_test","time":{"start":1728351007931,"stop":1728351008092,"duration":161},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1728351007931,"stop":1728351007931,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1728351007931,"stop":1728351007931,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1728351654013,"stop":1728351654013,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1728351654013,"stop":1728351654013,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Verifies that database units with attached storage correctly repurpose storage.\n\n    It is not enough to verify that Juju attaches the storage. Hence test checks that the\n    postgresql properly uses the storage that was provided. (ie. doesn't just re-sync everything\n    from primary, but instead computes a diff between current storage and primary storage.)\n    ","status":"passed","steps":[],"attachments":[{"uid":"8bdfd1b90449c6b0","name":"log","source":"8bdfd1b90449c6b0.txt","type":"text/plain","size":2617}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1728352265001,"stop":1728352266023,"duration":1022},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1728352266023,"stop":1728352266023,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1728353746708,"stop":1728353747225,"duration":517},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1728353747225,"stop":1728353747226,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1728353747226,"stop":1728353747226,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1728353747226,"stop":1728353747226,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az736-788"},{"name":"thread","value":"15725-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"25d036edcfe23e28","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":54,"skipped":0,"passed":62,"unknown":6,"total":122},"items":[{"uid":"28e72bc497de9d39","reportUrl":"../197//#testresult/28e72bc497de9d39","status":"passed","time":{"start":1728265269973,"stop":1728265888594,"duration":618621}},{"uid":"b96f21d9f1666fef","reportUrl":"../196//#testresult/b96f21d9f1666fef","status":"passed","time":{"start":1728178856388,"stop":1728179302341,"duration":445953}},{"uid":"b31b3cb5a584c12d","reportUrl":"../195//#testresult/b31b3cb5a584c12d","status":"passed","time":{"start":1728092439337,"stop":1728093071621,"duration":632284}},{"uid":"dac247af0f3d3b2d","reportUrl":"../194//#testresult/dac247af0f3d3b2d","status":"passed","time":{"start":1728006008415,"stop":1728006470956,"duration":462541}},{"uid":"72ea193d6bb8fee2","reportUrl":"../193//#testresult/72ea193d6bb8fee2","status":"passed","time":{"start":1727919814294,"stop":1727920308817,"duration":494523}},{"uid":"5a9a71d16a75adfc","reportUrl":"../192//#testresult/5a9a71d16a75adfc","status":"passed","time":{"start":1727833328860,"stop":1727833956324,"duration":627464}},{"uid":"2d84a31b96294f42","reportUrl":"../191//#testresult/2d84a31b96294f42","status":"broken","statusDetails":"UnboundLocalError: local variable 'connection' referenced before assignment","time":{"start":1727746894258,"stop":1727747666417,"duration":772159}},{"uid":"20fd432771236974","reportUrl":"../190//#testresult/20fd432771236974","status":"passed","time":{"start":1727660464378,"stop":1727660931077,"duration":466699}},{"uid":"629afef9eaf7a96e","reportUrl":"../189//#testresult/629afef9eaf7a96e","status":"passed","time":{"start":1727574043104,"stop":1727574650475,"duration":607371}},{"uid":"89a2b84ad2a71eec","reportUrl":"../188//#testresult/89a2b84ad2a71eec","status":"passed","time":{"start":1727487676927,"stop":1727488133296,"duration":456369}},{"uid":"8f5e1d65d682aaa7","reportUrl":"../187//#testresult/8f5e1d65d682aaa7","status":"passed","time":{"start":1727401271475,"stop":1727401727442,"duration":455967}},{"uid":"4f74d7fd67bce7db","reportUrl":"../186//#testresult/4f74d7fd67bce7db","status":"passed","time":{"start":1727314926562,"stop":1727315357208,"duration":430646}},{"uid":"e2ba7393631f9ae","reportUrl":"../184//#testresult/e2ba7393631f9ae","status":"broken","statusDetails":"juju.errors.JujuAPIError: application \"postgresql-test-app\" has no \"first-database\" relation","time":{"start":1727228521465,"stop":1727228522306,"duration":841}},{"uid":"e437e02666ec4726","reportUrl":"../183//#testresult/e437e02666ec4726","status":"broken","statusDetails":"juju.errors.JujuAPIError: application \"postgresql-test-app\" has no \"first-database\" relation","time":{"start":1727142210837,"stop":1727142211526,"duration":689}},{"uid":"57184fa83fda93c9","reportUrl":"../182//#testresult/57184fa83fda93c9","status":"broken","statusDetails":"juju.errors.JujuAPIError: application \"postgresql-test-app\" has no \"first-database\" relation","time":{"start":1727055767232,"stop":1727055768140,"duration":908}},{"uid":"804c3c17ef24c22d","reportUrl":"../181//#testresult/804c3c17ef24c22d","status":"broken","statusDetails":"juju.errors.JujuAPIError: application \"postgresql-test-app\" has no \"first-database\" relation","time":{"start":1726969436062,"stop":1726969436891,"duration":829}},{"uid":"4868b30fcfd53e38","reportUrl":"../180//#testresult/4868b30fcfd53e38","status":"broken","statusDetails":"juju.errors.JujuAPIError: application \"postgresql-test-app\" has no \"first-database\" relation","time":{"start":1726882936054,"stop":1726882936662,"duration":608}},{"uid":"9718602204e0278f","reportUrl":"../179//#testresult/9718602204e0278f","status":"broken","statusDetails":"juju.errors.JujuAPIError: application \"postgresql-test-app\" has no \"first-database\" relation","time":{"start":1726796535421,"stop":1726796536387,"duration":966}},{"uid":"62cc87df22173769","reportUrl":"../178//#testresult/62cc87df22173769","status":"unknown","time":{}},{"uid":"9cebef2d6435f78d","reportUrl":"../177//#testresult/9cebef2d6435f78d","status":"broken","statusDetails":"juju.errors.JujuAPIError: application \"postgresql-test-app\" has no \"first-database\" relation","time":{"start":1726623714795,"stop":1726623715869,"duration":1074}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"166739babe6401d6.json","parameterValues":[]}